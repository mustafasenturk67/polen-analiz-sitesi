<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polen VarlÄ±ÄŸÄ± Analizi (Gemini Destekli)</title>
    <!-- Google Font (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- DeÄŸiÅŸkenler (Projenin Renk Paleti ve Ana Stilleri) --- */
        :root {
            --primary-green-dark: #1b5e20;
            --primary-green: #388e3c;
            --primary-green-hover: #2e7d32;
            --primary-green-light: #a5d6a7;
            --background-light: #e8f5e9;
            --container-bg: rgba(255, 255, 255, 0.95);
            --text-dark: #333;
            --text-light: #555;
            --border-dashed-color: #66bb6a;
            --font-family: 'Inter', sans-serif;
        }

        /* --- SayfanÄ±n Genel Stili --- */
        body {
            font-family: var(--font-family);
            color: var(--text-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;

            /* Arka Plan GÃ¶rseli - DoÄŸal bir polen/bitki gÃ¶rseli kullanÄ±labilir */
            /* Placeholder: Bitki ve mikroskop gÃ¶rÃ¼ntÃ¼sÃ¼ */
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            background-size: cover;
            background-color: var(--background-light); 
        }

        /* --- Ana Ä°Ã§erik Kutusu (Container) --- */
        .container {
            background-color: var(--container-bg);
            padding: 100px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 550px;
            text-align: center;
            border: 3px solid var(--primary-green);
            box-sizing: border-box; 
            margin: 20px;
            transition: all 0.3s ease;
        }

        /* --- BaÅŸlÄ±k ve Paragraf Stilleri --- */
        h1 {
            color: var(--primary-green-dark);
            margin-top: 0;
            margin-bottom: 20px;
            font-weight: 700;
            border-bottom: 2px solid var(--primary-green-light);
            padding-bottom: 10px;
        }

        p {
            color: var(--text-light);
            line-height: 1.6;
            font-size: 1rem;
        }
        
        /* Ek Bilgi AlanÄ± Stili */
        #extraInfo {
            margin-top: 15px;
            padding: 15px;
            background-color: #e3f2fd; /* AÃ§Ä±k mavi arka plan */
            border: 1px solid #90caf9;
            border-radius: 8px;
            text-align: left;
            font-size: 1rem;
            line-height: 1.4;
            display: none; /* BaÅŸlangÄ±Ã§ta gizli */
            margin-bottom: 20px; /* Alttaki yeni alanla boÅŸluk */
        }
        
        #extraInfo p {
            margin: 5px 0;
            color: #1565c0; /* Koyu mavi metin */
        }


        /* --- YÃ¼kleme Formu --- */
        #uploadForm {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }

        /* --- DÃœZELTÄ°LMÄ°Å Dosya YÃ¼kleme Butonu --- */
        #fileInput {
            display: none;
        }

        .custom-file-upload-label {
            padding: 12px;
            border: 2px dashed var(--border-dashed-color);
            border-radius: 8px;
            background-color: #f1f8e9;
            color: var(--primary-green-dark);
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .custom-file-upload-label:hover {
            background-color: var(--background-light);
            border-color: var(--primary-green-dark);
            color: #000;
        }
        
        .file-icon {
            font-size: 1.2rem;
        }

        /* --- Buton Stilleri --- */
        #analyzeButton, .ai-button {
            background-color: var(--primary-green);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 1px;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        #analyzeButton:hover:not(:disabled), .ai-button:hover:not(:disabled) {
            background-color: var(--primary-green-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        #analyzeButton:disabled, .ai-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* --- SonuÃ§ AlanÄ± --- */
        #resultArea {
            margin-top: 35px;
            padding: 25px;
            border: 3px dashed var(--border-dashed-color);
            border-radius: 10px;
            min-height: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-green-dark);
            background-color: #f9fbe7;
            word-break: break-all;
            transition: border-color 0.5s ease, background-color 0.5s ease;
            text-align: center;
        }
        
        .result-p {
            margin: 5px 0;
            width: 100%;
        }

        /* YÃ¼kleniyor Spinner Animasyonu */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary-green);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin-right: 10px;
            display: inline-block;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Ã–nizleme GÃ¶rseli Stili */
        #imagePreview {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-top: 25px;
            border: 2px solid var(--primary-green-dark);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* Yapay Zeka Detay AlanlarÄ± */
        .details-area {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #fafafa;
            text-align: left;
            min-height: 100px;
            display: none; 
            transition: all 0.5s ease;
            white-space: pre-wrap; 
            color: var(--text-dark);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .details-area h3 {
            color: var(--primary-green-dark);
            font-size: 1.2rem;
            border-bottom: 1px dashed var(--primary-green-light);
            padding-bottom: 5px;
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        /* Mobil cihazlar iÃ§in kÃ¼Ã§Ã¼k bir dÃ¼zenleme */
        @media (max-width: 600px) {
            .container {
                padding: 25px;
                margin: 10px;
            }
            h1 {
                font-size: 1.5rem;
            }
            #analyzeButton, .ai-button {
                padding: 12px 20px;
                font-size: 16px;
            }
            #resultArea {
                font-size: 16px;
                padding: 15px;
            }
            .ai-button-container {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ”¬ Gemini ile Polen Analizi</h1>
        <p>Mikroskop altÄ±ndaki gÃ¶rÃ¼ntÃ¼nÃ¼zÃ¼ yÃ¼kleyin. Yapay zeka, gÃ¶rÃ¼ntÃ¼de polen olup olmadÄ±ÄŸÄ±nÄ± ve varsa tipini tespit edecektir.</p>

        <!-- Ã–nizleme gÃ¶rseli buraya eklenecek -->

        <form id="uploadForm">
            <!-- GerÃ§ek Dosya Input'u (Gizli) -->
            <input type="file" id="fileInput" name="file" accept="image/*">
            
            <!-- Ã–zel TasarÄ±mlÄ± Etiket -->
            <label for="fileInput" class="custom-file-upload-label">
                <span class="file-icon">ğŸ“</span>
                <span id="fileLabelText">Bir GÃ¶rÃ¼ntÃ¼ DosyasÄ± SeÃ§in</span>
            </label>

            <button type="submit" id="analyzeButton">Analiz Et</button>
        </form>

        <!-- SonuÃ§ AlanÄ± -->
        <div id="resultArea">
            SonuÃ§lar burada gÃ¶rÃ¼necektir.
        </div>
        
        <!-- Ek Bilgi AlanÄ± -->
        <div id="extraInfo">
            <p><strong>Polen Tipi:</strong> <span id="pollenTypeResult"></span></p>
        </div>
        
        <!-- YENÄ° Ã–ZELLÄ°K: Bilgi OluÅŸturma ButonlarÄ± (Flexbox ile dÃ¼zenlendi) -->
        <div id="aiButtonContainer" class="flex flex-col md:flex-row gap-4 mt-5">
            <!-- Polen Bilgisi Butonu -->
            <button id="generateInfoButton" disabled class="ai-button" style="display: none;">Polen HakkÄ±nda Bilgi Al âœ¨</button>
            <!-- Alerji Ã–nleme PlanÄ± Butonu -->
            <button id="generateActionPlanButton" disabled class="ai-button" style="display: none;">Alerji Ã–nleme PlanÄ± OluÅŸtur ğŸ›¡ï¸</button>
        </div>
        
        <!-- YENÄ° BÄ°LGÄ° ALANI 1: Polen DetaylarÄ± (Gemini 1) -->
        <div id="detailsAreaInfo" class="details-area">
            <h3>Polen DetaylarÄ± (Gemini AI)</h3>
            <p id="pollenDetailsContent">Butona bastÄ±ÄŸÄ±nÄ±zda yapay zeka, tespit edilen polen tipi hakkÄ±nda ayrÄ±ntÄ±lÄ± bilgiler (alerji, mevsim, kaynak) oluÅŸturacaktÄ±r.</p>
        </div>

        <!-- YENÄ° BÄ°LGÄ° ALANI 2: Ã–nleme PlanÄ± (Gemini 2) -->
        <div id="detailsAreaPlan" class="details-area" style="display: none;">
            <h3>Alerji Ã–nleme PlanÄ± (Gemini AI)</h3>
            <p id="pollenActionPlanContent">Alerji Ã¶nleme planÄ± buraya gelecek.</p>
        </div>

    </div>

    <script>
        // Sayfa tamamen yÃ¼klendiÄŸinde bu kod Ã§alÄ±ÅŸmaya baÅŸlar
        document.addEventListener('DOMContentLoaded', () => {
            // HTML elementlerini kod iÃ§inde kullanmak iÃ§in yakalÄ±yoruz
            const fileInput = document.getElementById('fileInput');
            const uploadForm = document.getElementById('uploadForm');
            const resultArea = document.getElementById('resultArea');
            const analyzeButton = document.getElementById('analyzeButton');
            const fileLabelText = document.getElementById('fileLabelText');
            const extraInfo = document.getElementById('extraInfo');
            const pollenTypeResult = document.getElementById('pollenTypeResult');
            
            // Gemini Ã–zellikleri Ä°Ã§in Yeni Elementler
            const generateInfoButton = document.getElementById('generateInfoButton'); 
            const generateActionPlanButton = document.getElementById('generateActionPlanButton');
            const detailsAreaInfo = document.getElementById('detailsAreaInfo');
            const detailsAreaPlan = document.getElementById('detailsAreaPlan');
            const pollenDetailsContent = document.getElementById('pollenDetailsContent');
            const pollenActionPlanContent = document.getElementById('pollenActionPlanContent');
            const aiButtonContainer = document.getElementById('aiButtonContainer');
             // API Endpoint'leri (GÃ¶reli yollar, sunucuyla aynÄ± adresten Ã§alÄ±ÅŸacak)
            const API_ENDPOINT = '/analyze'; // GÃ¶rÃ¼ntÃ¼ Analizi
            const INFO_API_ENDPOINT = '/get_pollen_info'; // Polen Bilgisi Ãœretimi (Gemini 1)
            const ACTION_PLAN_API_ENDPOINT = '/get_action_plan'; // Aksiyon PlanÄ± Ãœretimi (Gemini 2)

            // Analiz yapÄ±lmadan Ã¶nce veya dosya deÄŸiÅŸtirildiÄŸinde butonlarÄ± sÄ±fÄ±rlama
            const resetUI = () => {
                resultArea.innerHTML = 'SonuÃ§lar burada gÃ¶rÃ¼necektir.';
                extraInfo.style.display = 'none';
                
                // AI ButonlarÄ±nÄ± ve AlanlarÄ±nÄ± SÄ±fÄ±rla
                aiButtonContainer.style.display = 'none'; 
                generateInfoButton.style.display = 'none';
                generateInfoButton.disabled = true;
                generateActionPlanButton.style.display = 'none';
                generateActionPlanButton.disabled = true;

                detailsAreaInfo.style.display = 'none';
                detailsAreaPlan.style.display = 'none';
                
                pollenDetailsContent.textContent = 'Butona bastÄ±ÄŸÄ±nÄ±zda yapay zeka, tespit edilen polen tipi hakkÄ±nda ayrÄ±ntÄ±lÄ± bilgiler (alerji, mevsim, kaynak) oluÅŸturacaktÄ±r.';
                pollenActionPlanContent.textContent = 'Alerji Ã¶nleme planÄ± buraya gelecek.';
                
                resultArea.style.borderColor = '#66bb6a';
                resultArea.style.backgroundColor = '#f9fbe7';
            }

            // 1. Ã–NÄ°ZLEME FONKSÄ°YONU
            fileInput.addEventListener('change', function() {
                const file = this.files[0];
                fileLabelText.textContent = file ? file.name : 'Bir GÃ¶rÃ¼ntÃ¼ DosyasÄ± SeÃ§in';

                // Ã–nizleme ve sÄ±fÄ±rlama mantÄ±ÄŸÄ±
                document.getElementById('imagePreview')?.remove(); 
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.id = 'imagePreview';
                        img.src = e.target.result;
                        img.alt = 'SeÃ§ilen FotoÄŸraf Ã–nizlemesi';
                        uploadForm.insertAdjacentElement('beforebegin', img); 
                    };
                    reader.readAsDataURL(file); 
                }
                resetUI();
            });

            // 2. ANALÄ°Z Ä°ÅLEVÄ° (GÃ¶rÃ¼ntÃ¼ Analizi)
            uploadForm.addEventListener('submit', async function(e) {
                e.preventDefault(); 
                if (!fileInput.files.length) {
                    resultArea.innerHTML = '<span style="color: #dc3545;">ğŸš¨ LÃ¼tfen Ã¶nce bir fotoÄŸraf seÃ§in!</span>';
                    return;
                }

                // YÃ¼kleniyor Durumu
                analyzeButton.disabled = true; 
                analyzeButton.textContent = 'Analiz Ediliyor...';
                resetUI(); // AI butonlarÄ±nÄ± gizle
                resultArea.innerHTML = `<div class="spinner"></div> Analiz ediliyor, lÃ¼tfen bekleyin...`;
                resultArea.style.borderColor = '#007bff'; 
                resultArea.style.backgroundColor = '#e3f2fd'; 

                const formData = new FormData();
                formData.append('file', fileInput.files[0], fileInput.files[0].name); 

                try {
                    const response = await fetch(API_ENDPOINT, {
                        method: 'POST',
                        body: formData 
                    });

                    if (!response.ok) {
                        // EÄŸer yanÄ±t geldiyse ama status kodu hatalÄ±ysa (4xx, 5xx)
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(`Sunucu HatasÄ± (${response.status}): ${errorData.message || response.statusText}`);
                    }

                    const data = await response.json();

                    // Sonucun GÃ¶sterilmesi
                    analyzeButton.disabled = false; 
                    analyzeButton.textContent = 'Analiz Et';

                    const confidence = data.confidence.toFixed(2);
                    const pollenType = data.pollen_type || 'Belirlenemedi';

                    pollenTypeResult.textContent = pollenType;

                    if (data.is_pollen) {
                        resultArea.innerHTML = `
                            <p class="result-p" style="color:#28a745; font-size:1.4rem;">
                                âœ… **YÃœKSEK Ä°HTÄ°MALLE POLEN TESPÄ°T EDÄ°LDÄ°!**
                            </p>
                            <p class="result-p" style="font-size:1rem;">
                                GÃ¼ven PuanÄ±: %${confidence}
                            </p>
                        `;
                        resultArea.style.borderColor = '#28a745';
                        resultArea.style.backgroundColor = '#e6ffed';
                        extraInfo.style.display = 'block';
                        
                        // Polen varsa AI butonlarÄ±nÄ± gÃ¶ster ve aktif et
                        if (pollenType !== 'Yok' && pollenType !== 'Hata' && pollenType !== 'Belirlenemedi') {
                            aiButtonContainer.style.display = 'flex';
                            
                            generateInfoButton.style.display = 'block';
                            generateInfoButton.disabled = false;
                            generateInfoButton.textContent = `"${pollenType}" Polen HakkÄ±nda Bilgi Al âœ¨`;

                            generateActionPlanButton.style.display = 'block';
                            generateActionPlanButton.disabled = false;
                            generateActionPlanButton.textContent = `Alerji Ã–nleme PlanÄ± OluÅŸtur ğŸ›¡ï¸`;
                            
                            detailsAreaInfo.style.display = 'block'; // VarsayÄ±lan olarak Info alanÄ±nÄ± aÃ§
                        }

                    } else { 
                        resultArea.innerHTML = `
                            <p class="result-p" style="color:#dc3545; font-size:1.4rem;">
                                âŒ **YÃœKSEK Ä°HTÄ°MALLE POLEN YOKTUR.**
                            </p>
                            <p class="result-p" style="font-size:1rem;">
                                GÃ¼ven PuanÄ±: %${confidence}
                            </p>
                        `;
                        resultArea.style.borderColor = '#dc3545'; 
                        resultArea.style.backgroundColor = '#ffe6e6';
                        extraInfo.style.display = 'none'; 
                        aiButtonContainer.style.display = 'none';
                    } 
                    
                } catch (error) { 
                    console.error('Analiz hatasÄ±:', error);
                    analyzeButton.disabled = false;
                    analyzeButton.textContent = 'Analiz Et';
                    
                    // GeliÅŸtirilmiÅŸ Hata MesajÄ±
                    resultArea.innerHTML = `<span style="color: #dc3545; font-size:1rem;">
                        AÄŸ HatasÄ± (Failed to fetch / BaÄŸlantÄ± HatasÄ±): LÃ¼tfen **Python sunucusunun (Flask) Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan** ve **CORS ayarlarÄ±nÄ±n** tarayÄ±cÄ± eriÅŸimine izin verecek ÅŸekilde doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun. Endpoint: ${API_ENDPOINT} \n\nDetay: ${error.message}
                    </span>`;
                    resultArea.style.borderColor = '#dc3545';
                    resultArea.style.backgroundColor = '#ffe6e6';
                    extraInfo.style.display = 'none';
                    aiButtonContainer.style.display = 'none';
                } 
            }); 
            
            
            // 3. GEMINI 1: POLEN BÄ°LGÄ°SÄ° ÃœRETME Ä°ÅLEVÄ°
            generateInfoButton.addEventListener('click', async () => {
                const pollenType = pollenTypeResult.textContent;
                
                // AlanlarÄ± gÃ¶ster/gizle
                detailsAreaInfo.style.display = 'block';
                detailsAreaPlan.style.display = 'none';
                
                if (!pollenType || pollenType === 'Polen Yok / Belirlenemedi') {
                    pollenDetailsContent.textContent = 'LÃ¼tfen Ã¶nce baÅŸarÄ±lÄ± bir polen analizi yapÄ±n.';
                    return;
                }
                
                // YÃ¼kleniyor durumu
                generateInfoButton.disabled = true;
                generateInfoButton.textContent = 'Bilgi OluÅŸturuluyor...';
                pollenDetailsContent.innerHTML = `<div class="spinner"></div> Detaylar yapay zeka tarafÄ±ndan oluÅŸturuluyor...`;
                
                const payload = { pollen_type: pollenType };

                try {
                    const response = await fetch(INFO_API_ENDPOINT, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(`Sunucu HatasÄ± (${response.status}): ${errorData.error || response.statusText}`);
                    }
                    
                    const data = await response.json();
                    
                    generateInfoButton.disabled = false;
                    generateInfoButton.textContent = `"${pollenType}" Polen HakkÄ±nda Bilgi Al âœ¨`;
                    
                    if (data.info) {
                        pollenDetailsContent.textContent = data.info; 
                    } else if (data.error) {
                         pollenDetailsContent.textContent = `Hata: ${data.error}`;
                    } else {
                        pollenDetailsContent.textContent = "Yapay zekadan beklenmedik bir yanÄ±t geldi.";
                    }

                } catch (error) {
                    console.error('Bilgi oluÅŸturma hatasÄ±:', error);
                    generateInfoButton.disabled = false;
                    generateInfoButton.textContent = `"${pollenType}" Polen HakkÄ±nda Bilgi Al âœ¨`;
                    // GeliÅŸtirilmiÅŸ Hata MesajÄ±
                    pollenDetailsContent.textContent = `AÄŸ HatasÄ± (Failed to fetch / BaÄŸlantÄ± HatasÄ±): Python sunucunuzun (Flask) **Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan** ve **CORS ayarlarÄ±nÄ±n** tarayÄ±cÄ± eriÅŸimine izin verecek ÅŸekilde doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun. Endpoint: ${INFO_API_ENDPOINT} \n\nDetay: ${error.message}`;
                }
            });
            
            // 4. GEMINI 2: ALERJÄ° Ã–NLEME PLANI Ä°ÅLEVÄ°
            generateActionPlanButton.addEventListener('click', async () => {
                const pollenType = pollenTypeResult.textContent;
                
                // AlanlarÄ± gÃ¶ster/gizle
                detailsAreaPlan.style.display = 'block';
                detailsAreaInfo.style.display = 'none';
                
                if (!pollenType || pollenType === 'Polen Yok / Belirlenemedi') {
                    pollenActionPlanContent.textContent = 'LÃ¼tfen Ã¶nce baÅŸarÄ±lÄ± bir polen analizi yapÄ±n.';
                    return;
                }
                
                // YÃ¼kleniyor durumu
                generateActionPlanButton.disabled = true;
                generateActionPlanButton.textContent = 'Plan OluÅŸturuluyor...';
                pollenActionPlanContent.innerHTML = `<div class="spinner"></div> Alerji Ã¶nleme planÄ± yapay zeka tarafÄ±ndan oluÅŸturuluyor...`;
                
                const payload = { pollen_type: pollenType };

                try {
                    const response = await fetch(ACTION_PLAN_API_ENDPOINT, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(`Sunucu HatasÄ± (${response.status}): ${errorData.error || response.statusText}`);
                    }
                    
                    const data = await response.json();
                    
                    generateActionPlanButton.disabled = false;
                    generateActionPlanButton.textContent = `Alerji Ã–nleme PlanÄ± OluÅŸtur ğŸ›¡ï¸`;
                    
                    if (data.plan) {
                        pollenActionPlanContent.textContent = data.plan; // Gelen plan bilgisini gÃ¶ster
                    } else if (data.error) {
                         pollenActionPlanContent.textContent = `Hata: ${data.error}`;
                    } else {
                        pollenActionPlanContent.textContent = "Yapay zekadan beklenmedik bir yanÄ±t geldi.";
                    }

                } catch (error) {
                    console.error('Aksiyon planÄ± oluÅŸturma hatasÄ±:', error);
                    generateActionPlanButton.disabled = false;
                    generateActionPlanButton.textContent = `Alerji Ã–nleme PlanÄ± OluÅŸtur ğŸ›¡ï¸`;
                    // GeliÅŸtirilmiÅŸ Hata MesajÄ±
                    pollenActionPlanContent.textContent = `AÄŸ HatasÄ± (Failed to fetch / BaÄŸlantÄ± HatasÄ±): Python sunucunuzun (Flask) **Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan** ve **CORS ayarlarÄ±nÄ±n** tarayÄ±cÄ± eriÅŸimine izin verecek ÅŸekilde doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun. Endpoint: ${ACTION_PLAN_API_ENDPOINT} \n\nDetay: ${error.message}`;
                }
            });
        }); 
    </script>
</body>
</html>
